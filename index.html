<html lang="en">
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/css/bootstrap.min.css" type="text/css"/>
</head>
<body>

<div class="container">
  <form>
    <div class="form-group">
      <label for="input"><h1>Input</h1></label>
      <textarea id="input" class="form-control" rows="10" cols="80" placeholder="Copy here some SQL and press <tab> or click on the Clean button"></textarea>
    </div>

    <button id="clean" type="button" class="btn btn-primary">Clean!</button>

    <div class="checkbox-inline">
      <label>
        <input type="checkbox" id="escape_double_quotes"> Escape double quotes
      </label>
    </div>

    <div class="form-group">
      <label for="output"><h2>Output</h2></label>
      <textarea id="output" class="form-control" rows="10" cols="80" placeholder="Get the one-liner here"></textarea>
    </div>
  </form>
</div>

<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>

<script type="text/javascript">
  function clean(dom, escapeDoubleQuotesEnabled) {
    var text = dom.input.val();
    text = text.replace(/\n/g, " ");
    if (escapeDoubleQuotesEnabled)
      text = text.replace(/"/g, '\\"');
    while (text.indexOf("  ") != -1)
      text = text.replace("  ", " ");
    dom.output.html(text).select();
  }

  $(document).on('ready', function () {
    var dom = {
      input: $('#input'),
      clean: $('#clean'),
      output: $('#output'),
      escapeDoubleQuotes: $('#escape_double_quotes')
    };
    var escapeDoubleQuotesEnabled = true;

    dom.escapeDoubleQuotes.prop('checked', escapeDoubleQuotesEnabled);

    dom.escapeDoubleQuotes.on('change', function () {
      escapeDoubleQuotesEnabled = this.checked;
    });

    dom.clean.on('click', function () {
      clean(dom, escapeDoubleQuotesEnabled);
    });

    dom.input.on('change', function () {
      clean(dom, escapeDoubleQuotesEnabled);
    });
  });
</script>

</body>
</html>
